# เอเจนต์ขับเคลื่อนด้วย LLM (ReAct)

## เอเจนต์ (ReAct) คืออะไร?

เอเจนต์เป็นระบบปัญญาประดิษฐ์ขั้นสูงที่ใช้โมเดลภาษาขนาดใหญ่ (LLMs) เป็นเครื่องยนต์คำนวณหลัก โดยรวมความสามารถในการให้เหตุผลของ LLMs เข้ากับฟังก์ชันเพิ่มเติม เช่น การวางแผนและการใช้เครื่องมือ เพื่อดำเนินงานที่ซับซ้อนด้วยตนเอง เอเจนต์สามารถแยกแยะคำสั่งที่ซับซ้อน สร้างโซลูชันทีละขั้นตอน และโต้ตอบกับเครื่องมือหรือ API ภายนอกเพื่อรวบรวมข้อมูลหรือดำเนินงานย่อย

ตัวอย่างนี้ใช้เอเจนต์ด้วยวิธีการ [ReAct (การให้เหตุผล + การกระทำ)](https://www.promptingguide.ai/techniques/react) ReAct ช่วยให้เอเจนต์สามารถแก้ปัญหาที่ซับซ้อนโดยการรวมการให้เหตุผลและการกระทำในวงรอบป้อนกลับแบบวนซ้ำ เอเจนต์จะผ่านสามขั้นตอนหลัก: ความคิด การกระทำ และการสังเกต โดยวิเคราะห์สถานการณ์ปัจจุบันโดยใช้ LLM ตัดสินใจเลือกการกระทำถัดไป ดำเนินการกระทำโดยใช้เครื่องมือหรือ API ที่มี และเรียนรู้จากผลที่สังเกตได้ กระบวนการต่อเนื่องนี้ช่วยให้เอเจนต์สามารถปรับตัวกับสภาพแวดล้อมที่เปลี่ยนแปลง ปรับปรุงความแม่นยำในการแก้ปัญหา และให้โซลูชันที่คำนึงถึงบริบท

## กรณีการใช้งานตัวอย่าง

เอเจนต์ที่ใช้ ReAct สามารถนำไปประยุกต์ใช้ในสถานการณ์ต่างๆ โดยให้โซลูชันที่แม่นยำและมีประสิทธิภาพ

### การแปลงข้อความเป็น SQL

ผู้ใช้ถามถึง "ยอดขายรวมของไตรมาสที่ผ่านมา" เอเจนต์จะตีความคำขอนี้ แปลงเป็นคิวรี SQL ดำเนินการกับฐานข้อมูล และนำเสนอผลลัพธ์

### การพยากรณ์ทางการเงิน

นักวิเคราะห์ทางการเงินต้องการพยากรณ์รายได้ของไตรมาสถัดไป เอเจนต์จะรวบรวมข้อมูลที่เกี่ยวข้อง คำนวณโดยใช้แบบจำลองทางการเงิน และสร้างรายงานพยากรณ์อย่างละเอียด เพื่อให้มั่นใจในความแม่นยำของการคาดการณ์

## การใช้คุณลักษณะของเอเจนต์

เพื่อเปิดใช้งานฟังก์ชันเอเจนต์สำหรับแชทบอทที่กำหนดเองของคุณ ให้ปฏิบัติตามขั้นตอนเหล่านี้:

มีสองวิธีในการใช้คุณลักษณะของเอเจนต์:

### การใช้เครื่องมือ

เพื่อเปิดใช้งานฟังก์ชันเอเจนต์ด้วยการใช้เครื่องมือสำหรับแชทบอทที่กำหนดเองของคุณ ให้ปฏิบัติตามขั้นตอนเหล่านี้:

1. ไปที่ส่วนเอเจนต์ในหน้าจอแชทบอทที่กำหนดเอง

2. ในส่วนเอเจนต์ คุณจะพบรายการเครื่องมือที่สามารถใช้โดยเอเจนต์ โดยค่าเริ่มต้น เครื่องมือทั้งหมดจะถูกปิดใช้งาน

3. เพื่อเปิดใช้งานเครื่องมือ ให้สลับสวิตช์ที่อยู่ถัดจากเครื่องมือที่ต้องการ เมื่อเปิดใช้งานเครื่องมือ เอเจนต์จะสามารถเข้าถึงและใช้งานได้ขณะประมวลผลคำถามของผู้ใช้

![](./imgs/agent_tools.png)

4. ตัวอย่างเช่น เครื่องมือ "การค้นหาอินเทอร์เน็ต" จะช่วยให้เอเจนต์สามารถค้นหาข้อมูลจากอินเทอร์เน็ตเพื่อตอบคำถามของผู้ใช้

![](./imgs/agent1.png)
![](./imgs/agent2.png)

5. คุณสามารถพัฒนาและเพิ่มเครื่องมือแบบกำหนดเองเพื่อขยายความสามารถของเอเจนต์ โปรดดูที่ส่วน [วิธีพัฒนาเครื่องมือของคุณเอง](#how-to-develop-your-own-tools) สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการสร้างและรวมเครื่องมือแบบกำหนดเอง

### การใช้เอเจนต์ Bedrock

คุณสามารถใช้[เอเจนต์ Bedrock](https://aws.amazon.com/bedrock/agents/) ที่สร้างใน Amazon Bedrock

ขั้นแรก ให้สร้างเอเจนต์ใน Bedrock (เช่น ผ่านคอนโซลการจัดการ) จากนั้นระบุ ID ของเอเจนต์ในหน้าจอการตั้งค่าแชทบอทที่กำหนดเอง เมื่อตั้งค่าแล้ว แชทบอทของคุณจะใช้ประโยชน์จากเอเจนต์ Bedrock เพื่อประมวลผลคำถามของผู้ใช้

![](./imgs/bedrock_agent_tool.png)

## วิธีพัฒนาเครื่องมือของคุณเอง

เพื่อพัฒนาเครื่องมือแบบกำหนดเองสำหรับ Agent ให้ปฏิบัติตามแนวทางเหล่านี้:

- สร้างคลาสใหม่ที่สืบทอดมาจากคลาส `AgentTool` แม้ว่าอินเทอร์เฟซจะเข้ากันได้กับ LangChain แต่การใช้งานตัวอย่างนี้จะมี `AgentTool` คลาสเป็นของตัวเอง ซึ่งคุณควรสืบทอดมาจาก ([แหล่งที่มา](../backend/app/agents/tools/agent_tool.py))

- ดูตัวอย่างการใช้งานของ[เครื่องมือคำนวณ BMI](../examples/agents/tools/bmi/bmi.py) ตัวอย่างนี้แสดงวิธีการสร้างเครื่องมือที่คำนวณดัชนีมวลกาย (BMI) ตามข้อมูลที่ผู้ใช้ป้อน

  - ชื่อและคำอธิบายที่ประกาศบนเครื่องมือจะถูกใช้เมื่อ LLM พิจารณาว่าควรใช้เครื่องมือใดในการตอบคำถามของผู้ใช้ กล่าวอีกนัยหนึ่งคือ จะถูกฝังลงในพรอมพ์เมื่อเรียก LLM ดังนั้นควรอธิบายให้ชัดเจนที่สุดเท่าที่เป็นไปได้

- [เลือกได้] เมื่อคุณได้พัฒนาเครื่องมือแบบกำหนดเองแล้ว แนะนำให้ตรวจสอบฟังก์ชันการทำงานโดยใช้สคริปต์ทดสอบ ([ตัวอย่าง](../examples/agents/tools/bmi/test_bmi.py)) สคริปต์นี้จะช่วยให้คุณมั่นใจว่าเครื่องมือของคุณทำงานได้ตามที่คาดหวัง

- หลังจากพัฒนาและทดสอบเครื่องมือแบบกำหนดเองเสร็จแล้ว ให้ย้ายไฟล์การใช้งานไปยังไดเรกทอรี [backend/app/agents/tools/](../backend/app/agents/tools/) จากนั้นเปิด [backend/app/agents/utils.py](../backend/app/agents/utils.py) และแก้ไข `get_available_tools` เพื่อให้ผู้ใช้สามารถเลือกเครื่องมือที่พัฒนาได้

- [เลือกได้] เพิ่มชื่อและคำอธิบายที่ชัดเจนสำหรับส่วนหน้า ขั้นตอนนี้เป็นทางเลือก แต่หากคุณไม่ทำ ชื่อและคำอธิบายเครื่องมือที่ประกาศในเครื่องมือของคุณจะถูกใช้ ซึ่งเป็นสำหรับ LLM แต่ไม่ใช่สำหรับผู้ใช้ ดังนั้นแนะนำให้เพิ่มคำอธิบายเฉพาะเพื่อปรับปรุงประสบการณ์ผู้ใช้

  - แก้ไขไฟล์ i18n เปิด [en/index.ts](../frontend/src/i18n/en/index.ts) และเพิ่ม `name` และ `description` ของคุณใน `agent.tools`
  - แก้ไข `xx/index.ts` เช่นกัน โดย `xx` แทนรหัสประเทศที่คุณต้องการ

- เรียกใช้ `npx cdk deploy` เพื่อปรับใช้การเปลี่ยนแปลงของคุณ ซึ่งจะทำให้เครื่องมือแบบกำหนดเองของคุณพร้อมใช้งานในหน้าจอบอทแบบกำหนดเอง

## การมีส่วนร่วม

**ยินดีต้อนรับการมีส่วนร่วมในที่เก็บเครื่องมือ!** หากคุณพัฒนาเครื่องมือที่มีประโยชน์และมีการใช้งานที่ดี โปรดพิจารณาการส่งเครื่องมือนั้นเข้าสู่โครงการโดยการส่งปัญหาหรือส่งคำขอดึง (pull request)